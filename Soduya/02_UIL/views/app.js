let arr =
  [
    {
      "web_pages": [
        "http://www.afeka.ac.il/"
      ],
      "alpha_two_code": "IL",
      "state-province": null,
      "country": "Israel",
      "domains": [
        "afeka.ac.il"
      ],
      "name": "Afeka Tel Aviv Academic College of Engineering"
    },
    {
      "web_pages": [
        "http://www.ariel.ac.il/"
      ],
      "alpha_two_code": "IL",
      "state-province": null,
      "country": "Israel",
      "domains": [
        "ariel.ac.il"
      ],
      "name": "Ariel University Center of Samaria"
    },
    {
      "web_pages": [
        "http://www.ash-college.ac.il/"
      ],
      "alpha_two_code": "IL",
      "state-province": null,
      "country": "Israel",
      "domains": [
        "ash-college.ac.il"
      ],
      "name": "Ashkelon Academic College"
    },
    {
      "web_pages": [
        "http://www.bezalel.ac.il/"
      ],
      "alpha_two_code": "IL",
      "state-province": null,
      "country": "Israel",
      "domains": [
        "bezalel.ac.il"
      ],
      "name": "Bezalel Academy of Art and Design"
    },
    {
      "web_pages": [
        "http://www.bgu.ac.il/"
      ],
      "alpha_two_code": "IL",
      "state-province": null,
      "country": "Israel",
      "domains": [
        "bgu.ac.il"
      ],
      "name": "Ben-Gurion University of the Negev"
    },
    {
      "web_pages": [
        "http://www.biu.ac.il/"
      ],
      "alpha_two_code": "IL",
      "state-province": null,
      "country": "Israel",
      "domains": [
        "biu.ac.il"
      ],
      "name": "Bar-Ilan University"
    },
    {
      "web_pages": [
        "http://www.clb.ac.il/"
      ],
      "alpha_two_code": "IL",
      "state-province": null,
      "country": "Israel",
      "domains": [
        "clb.ac.il"
      ],
      "name": "Acdemic Center for Law and Business"
    },
    {
      "web_pages": [
        "http://www.colman.ac.il/"
      ],
      "alpha_two_code": "IL",
      "state-province": null,
      "country": "Israel",
      "domains": [
        "colman.ac.il"
      ],
      "name": "College of Management"
    },
    {
      "web_pages": [
        "http://www.galilcol.ac.il/"
      ],
      "alpha_two_code": "IL",
      "state-province": null,
      "country": "Israel",
      "domains": [
        "galilcol.ac.il"
      ],
      "name": "Galillee College"
    },
    {
      "web_pages": [
        "http://www.haifa.ac.il/"
      ],
      "alpha_two_code": "IL",
      "state-province": null,
      "country": "Israel",
      "domains": [
        "haifa.ac.il"
      ],
      "name": "University of Haifa"
    },
    {
      "web_pages": [
        "http://www.huji.ac.il/"
      ],
      "alpha_two_code": "IL",
      "state-province": null,
      "country": "Israel",
      "domains": [
        "huji.ac.il"
      ],
      "name": "Hebrew University of Jerusalem"
    },
    {
      "web_pages": [
        "http://www.idc.ac.il/"
      ],
      "alpha_two_code": "IL",
      "state-province": null,
      "country": "Israel",
      "domains": [
        "idc.ac.il"
      ],
      "name": "The Interdisciplinary Center Herzliya"
    },
    {
      "web_pages": [
        "http://www.juc.edu/"
      ],
      "alpha_two_code": "IL",
      "state-province": null,
      "country": "Israel",
      "domains": [
        "juc.edu"
      ],
      "name": "Jerusalem University College"
    },
    {
      "web_pages": [
        "http://www.openu.ac.il/"
      ],
      "alpha_two_code": "IL",
      "state-province": null,
      "country": "Israel",
      "domains": [
        "openu.ac.il"
      ],
      "name": "Open University of Israel"
    },
    {
      "web_pages": [
        "http://rbni.technion.ac.il/"
      ],
      "alpha_two_code": "IL",
      "state-province": null,
      "country": "Israel",
      "domains": [
        "rbni.technion.ac.il"
      ],
      "name": "Russell Berrie Nanotechnology Institute"
    },
    {
      "web_pages": [
        "http://www.sce.ac.il/"
      ],
      "alpha_two_code": "IL",
      "state-province": null,
      "country": "Israel",
      "domains": [
        "sce.ac.il"
      ],
      "name": "Sami Shamoon College of Engineering"
    },
    {
      "web_pages": [
        "http://www.shenkar.ac.il/"
      ],
      "alpha_two_code": "IL",
      "state-province": null,
      "country": "Israel",
      "domains": [
        "shenkar.ac.il"
      ],
      "name": "Shenkar School of Engineering & Design"
    },
    {
      "web_pages": [
        "http://www.tau.ac.il/"
      ],
      "alpha_two_code": "IL",
      "state-province": null,
      "country": "Israel",
      "domains": [
        "tau.ac.il"
      ],
      "name": "Tel Aviv University"
    },
    {
      "web_pages": [
        "http://www.technion.ac.il/"
      ],
      "alpha_two_code": "IL",
      "state-province": null,
      "country": "Israel",
      "domains": [
        "technion.ac.il"
      ],
      "name": "Technion - Israel Institute of Technology"
    },
    {
      "web_pages": [
        "http://www.weizmann.ac.il/"
      ],
      "alpha_two_code": "IL",
      "state-province": null,
      "country": "Israel",
      "domains": [
        "weizmann.ac.il"
      ],
      "name": "Weizmann Institute of Science"
    },
    {
      "web_pages": [
        "http://www.wgalil.ac.il/"
      ],
      "alpha_two_code": "IL",
      "state-province": null,
      "country": "Israel",
      "domains": [
        "wgalil.ac.il"
      ],
      "name": "Western Galilee College"
    },
    {
      "web_pages": [
        "http://www.yvc.ac.il/"
      ],
      "alpha_two_code": "IL",
      "state-province": null,
      "country": "Israel",
      "domains": [
        "yvc.ac.il"
      ],
      "name": "Emeq Yizrael College"
    }
  ]
var newChair = "";
var ar = [];
function loadStart() {
  let str = `
			<div id="bg">
						<div id ="img"></div>
						<div class="module">
										<select class="tab" id="activ" ></select>
										<select class="tab" id="floor"></select>
										<select class="tab" id="date"></select>
										<select class="tab" id="time"></select>
										<input onclick="find()" type="button" value="מצא מקום" class="button" />
								</div>
		</div>`
  document.getElementById("start").innerHTML = str;
  loadUniversities(arr);
}
function loadUniversities(arr) {

  let str = `<option>בחר אוניברסיטה</option>`;
  for (let i = 0; i < arr.length; i++) {
    str += `<option value=${arr[i].name}>${arr[i].name}</option>`
      ;
  }
  document.getElementById("activ").innerHTML = str;

  SetDate();
  SetTime();
  SetFloor();
}
function SetDate() {
  let cnt = 0;
  let d = new Date();
  let date = d.getDate() + '/' + (d.getMonth() + 1) + '/' + d.getFullYear();
  let day = `<option>בחר תאריך</option>`;
  var Day = { "1": "ראשון", "2": "שני", "3": "שלישי", "4": "רביעי", "5": "חמישי", "6": "שישי", "7": "סגור" };
  for (let i = d.getDay() + 1; i < 7; i++) {
    date = (d.getDate() + cnt++) + '/' + (d.getMonth() + 1) + '/' + d.getFullYear();
    day += `<option value=${date + " " + Day[d.getDay() + i]}>${date + " " + Day[d.getDay() + i]}</option>`;
  }
  document.getElementById("date").innerHTML = day;

}
function SetTime() {
  let Hours;
  str = `<option value=${"בחר שעה"}>${"בחר שעה"}</option>`;
  let d = new Date();
  if (d.getMinutes() > 45)
    Hours = d.getHours() + 1
  else
    Hours = d.getHours()
  if (Hours < 6)
    Hours = 6
  console.log(Hours)
  for (i = Hours; i < 24; i++) {
    str += `<option value=${i + ':00'}>${i + ':00'}</option>`
      ;
  }
  document.getElementById("time").innerHTML = str;

}
function SetFloor() {
  let str = `<option value=${"בחר קומה"}>${"בחר קומה"}</option>`;
  for (let i = 0; i < 3; i++) {
    str += `<option value=${i}>${+ i}</option>`
      ;
  }
  document.getElementById("floor").innerHTML = str;
}
function selectChair(e) {
  if (e.target.style.background == 'red') {
    audio1('98');
    return;
  }
  if (e.target.style.background == 'gray') {
    audio1('p');
    e.target.style.background = 'green';
    newChair = {
      "university_name": ar[0],
      "floor": ar[1],
      "date_at": ar[2],
      "created_at": ar[3],
      "updated_at": ar[4],
      "id": e.target.id,
      "steet": true
    };
    console.log(newChair)
  }
  else
  //  if(e.target.style.background=='green')
  {
    e.target.style.background = 'gray';
    newChair = {
      "university_name": ar[0],
      "floor": ar[1],
      "date_at": ar[2],
      "created_at": ar[3],
      "updated_at": ar[4],
      "id": e.target.id,
      "steet": false
    };
    console.log(newChair)
  }
}
function find() {
  editChair();
  let str = `
  <div id="bg">
            
  <div class="room">
<div class="grid">
    <div class="container">
        <div class="chairs">
            <button id="1" onclick="selectChair(event)" >1</button>
            <button id="2" onclick="selectChair(event)" >2</button>
        </div>
        <div class="table"></div>
        <div class="chairs">
            <button id="3" onclick="selectChair(event)" >3</button>
            <button id="4" onclick="selectChair(event)" >4</button>
        </div>
    </div>

    <div class="container">
        <div class="chairs">
            <button id="5" onclick="selectChair(event)" >1</button>
            <button id="6" onclick="selectChair(event)" >2</button>
        </div>
        <div class="table"></div>
        <div class="chairs">
            <button id="7" onclick="selectChair(event)" >3</button>
            <button id="8" onclick="selectChair(event)" >4</button>
        </div>
    </div>

    <div class="container">
        <div class="chairs">
            <button id="9" onclick="selectChair(event)" >1</button>
            <button id="10" onclick="selectChair(event)" >2</button>
        </div>
        <div class="table"></div>
        <div class="chairs">
            <button id="11" onclick="selectChair(event)" >3</button>
            <button id="12" onclick="selectChair(event)" >4</button>
        </div>
    </div>
</div>
<div class="grid">
        <div class="container">
            <div class="chairs">
                <button id="13" onclick="selectChair(event)" >1</button>
                <button id="14" onclick="selectChair(event)" >2</button>
            </div>
            <div class="table"></div>
            <div class="chairs">
                <button id="15" onclick="selectChair(event)" >3</button>
                <button id="16" onclick="selectChair(event)" >4</button>
            </div>
        </div>
    <button onclick="addChair()" id="div1">תפוס כסא</button>
        <div class="container clear">

        </div>
    
        <div class="container">
            <div class="chairs">
                <button id="17" onclick="selectChair(event)" >1</button>
                <button id="18" onclick="selectChair(event)" >2</button>
            </div>
            <div class="table"></div>
            <div class="chairs">
                <button id="19" onclick="selectChair(event)" >3</button>
                <button id="20" onclick="selectChair(event)" >4</button>
            </div>
        </div>
    </div>
    <div class="grid">
            <div class="container">
                <div class="chairs">
                    <button id="21" onclick="selectChair(event)" >1</button>
                    <button id="22" onclick="selectChair(event)" >2</button>
                </div>
                <div class="table"></div>
                <div class="chairs">
                    <button id="23" onclick="selectChair(event)" >3</button>
                    <button id="24" onclick="selectChair(event)" >4</button>
                </div>
            </div>
        
            <div class="container">
                    <div class="chairs">
                        <button id="25" onclick="selectChair(event)" >1</button>
                        <button id="26" onclick="selectChair(event)" >2</button>
                    </div>
                    <div class="table"></div>
                    <div class="chairs">
                        <button id="27" onclick="selectChair(event)" >3</button>
                        <button id="28" onclick="selectChair(event)" >4</button>
                    </div>
                </div>
        
            <div class="container">
                <div class="chairs">
                    <button id="29" onclick="selectChair(event)" >1</button>
                    <button id="30" onclick="selectChair(event)" >2</button>
                </div>
                <div class="table"></div>
                <div class="chairs">
                    <button id="31" onclick="selectChair(event)" >3</button>
                    <button id="32" onclick="selectChair(event)" >4</button>
                </div>
            </div>
        </div>
    </div>
</div>

</div>`
  document.getElementById("start").innerHTML = str
  fetch("/api")
    .then(res => res.json())
    .then(body => {
      for (x of body)
        if (x.steet == 1)
          document.getElementById(`${x.id}`).style.background = "red";
    })
    .catch(ex => console.log(ex));
}


function editChair() {
  ar.push(document.getElementById('activ').value)
  ar.push(document.getElementById('floor').value)
  ar.push(document.getElementById('date').value)
  ar.push(document.getElementById('time').value)
  ar.push(document.getElementById('time').value);
}

function addChair() {

  fetch("/chair", {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
    },
    body: JSON.stringify(newChair),
  })
    .then(x => {
      let str = ` <link rel="stylesheet" href="style1.css" />
      <div id="bg">
      <div class="module">
        <ul>
          <li class="tab activeTab"><img src="https://i.imgur.com/Fk1Urva.png" alt="" class="icon"/></li>
          <li class="tab" ><img src="https://i.imgur.com/ZsRgIDD.png" alt="" class="icon"/></li>
          <li class="tab" ><img src="https://i.imgur.com/34Q50wo.png" alt="" class="icon"/></li>
          <li class="tab" ><img src="https://i.imgur.com/LCCJ06E.png" alt="" class="icon"/></li>
        </ul>
        
        <form class="form">
          <input type="text" placeholder="First Name" class="textbox" />
          <input type="text" placeholder="Last Name" class="textbox" />
          <input type="text" placeholder="Email Address" class="textbox" />
          <input onclick="loadStart()" type="button" value="Next" class="button" />
        </form>
      </div>
    </div>
    `;
    document.getElementById("start").innerHTML = str;

    })
    .then(x => {
      document.getElementsByClassName("textbox").innerHTML = "";
    })
    .catch(ex => console.log(ex));

}

function audio1(k) {
  var audio = new Audio(k + ".ogg");
  audio.oncanplaythrough = function () {
    audio.play();
  }
  audio.loop = false;
}




